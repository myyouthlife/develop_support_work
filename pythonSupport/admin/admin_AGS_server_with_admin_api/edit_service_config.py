#coding:utf-8


__author__ = 'jiangmb'

from Get_site_information_helper import  *
import json
server="localhost"
port='6080'
username='arcgis'
password='Super123'
path='d:\\'
clustername='default'

adminself=ADMINself(username,password,server,port)

dataObj=adminself.getServiceConfig('SampleWorldCities.MapServer')
dataObj["minInstancesPerNode"] =4
dataObj["maxInstancesPerNode"] =5
#result={u'maxInstancesPerNode': 1, u'keepAliveInterval': 1800, u'maxUploadFileSize': 0, u'private': False, u'maxStartupTime': 300, u'loadBalancing': u'ROUND_ROBIN', u'configuredState': u'STARTED', u'capabilities': u'Map,Query,Data', u'serviceName': u'test', u'provider': u'ArcObjects', u'type': u'MapServer', u'isDefault': False, u'description': u'', u'clusterName': u'default', u'recycleStartTime': u'00:00', u'properties': {u'supportedImageReturnTypes': u'URL', u'useLocalCacheDir': u'true', u'isCached': u'false', u'clientCachingAllowed': u'true', u'schemaLockingEnabled': u'true', u'virtualOutputDir': u'/rest/directories/arcgisoutput', u'textAntialiasingMode': u'Force', u'enableDynamicLayers': u'false', u'cacheDir': u'C:\\arcgisserver\\directories\\arcgiscache', u'antialiasingMode': u'None', u'hasStaticData': u'true', u'outputDir': u'C:\\arcgisserver\\directories\\arcgisoutput', u'maxRecordCount': u'1000', u'dynamicDataWorkspaces': u'', u'virtualCacheDir': u'/rest/directories/arcgiscache', u'filePath': u'C:\\arcgisserver\\directories\\arcgissystem\\arcgisinput\\test.MapServer\\extracted\\v101\\test.msd', u'maxImageHeight': u'4096', u'cacheOnDemand': u'false', u'maxBufferCount': u'100', u'disableIdentifyRelates': u'false', u'maxExportTilesCount': u'100000', u'maxImageWidth': u'4096', u'maxScale': u'4513.9887049999998', u'maxDomainCodeCount': u'25000', u'minScale': u'73957190.948944002', u'ignoreCache': u'false', u'exportTilesAllowed': u'false'}, u'maxUsageTime': 600, u'datasets': [], u'allowedUploadFileTypes': u'', u'isolationLevel': u'HIGH', u'maxIdleTime': 1800, u'minInstancesPerNode': 1, u'extensions': [{u'allowedUploadFileTypes': u'', u'enabled': u'false', u'maxUploadFileSize': 0, u'capabilities': u'', u'typeName': u'NAServer', u'properties': {u'oDCostMatrix_ForceHierarchyBeyondDistance': u'', u'saveLayerOnServerWhenError': u'false', u'locationAllocation_MaxFeaturesInPolygonBarriers': u'', u'allowSaveLayerOnServer': u'true', u'oDCostMatrix_MaxOrigins': u'', u'serviceArea_MaxBarriers': u'', u'serviceArea_MaxBreakValue_Time': u'', u'closestFacility_ForceHierarchyBeyondDistanceUnits': u'esriMeters', u'vRP_MaxFeaturesInPolygonBarriers': u'', u'oDCostMatrix_ForceHierarchyBeyondDistanceUnits': u'esriMeters', u'closestFacility_MaxFacilities': u'', u'serviceArea_MaxFeaturesInLineBarriers': u'', u'locationAllocation_MaxBarriers': u'', u'serviceArea_MaxFacilities': u'', u'serviceArea_MaxBreakValue_Other': u'', u'locationAllocation_ForceHierarchyBeyondDistance': u'', u'serviceArea_MaxFeaturesInPolygonBarriers': u'', u'closestFacility_MaxBarriers': u'', u'locationAllocation_ForceHierarchyBeyondDistanceUnits': u'esriMeters', u'route_MaxBarriers': u'', u'oDCostMatrix_MaxDestinations': u'', u'oDCostMatrix_MaxFeaturesInPolygonBarriers': u'', u'route_MaxFeaturesInLineBarriers': u'', u'serviceArea_ForceHierarchyBeyondDistance': u'', u'serviceArea_ForceHierarchyBeyondTime': u'', u'naLayerDir': u'', u'closestFacility_MaxFeaturesInLineBarriers': u'', u'oDCostMatrix_MaxBarriers': u'', u'route_MaxFeaturesInPolygonBarriers': u'', u'serviceArea_ForceHierarchyBeyondTimeUnits': u'esriTimeUnitsMinutes', u'vRP_MaxFeaturesInLineBarriers': u'', u'defaultOutputGeometryPrecisionUnits': u'esriMeters', u'defaultOutputGeometryPrecision': u'', u'locationAllocation_MaxFacilities': u'', u'serviceArea_MaxBreakValue_LengthUnits': u'esriMeters', u'closestFacility_MaxFacilitiesToFind': u'', u'route_AllowTimeWindows': u'true', u'vRP_MaxRoutes': u'', u'serviceArea_ForceHierarchyBeyondDistanceUnits': u'esriMeters', u'vRP_MaxBarriers': u'', u'oDCostMatrix_MaxDestinationsToFind': u'', u'route_ForceHierarchyBeyondDistance': u'', u'serviceArea_MaxBreakValue_TimeUnits': u'esriTimeUnitsMinutes', u'closestFacility_MaxFeaturesInPolygonBarriers': u'', u'closestFacility_MaxIncidents': u'', u'vRP_ForceHierarchyBeyondDistanceUnits': u'esriMeters', u'vRP_MaxOrders': u'', u'oDCostMatrix_MaxFeaturesInLineBarriers': u'', u'route_MaxStops': u'', u'saveLayerOnServerWhenDebugging': u'false', u'vRP_ForceHierarchyBeyondDistance': u'', u'locationAllocation_MaxDemandPoints': u'', u'serviceArea_MaxBreakValue_Length': u'', u'route_ForceHierarchyBeyondDistanceUnits': u'esriMeters', u'closestFacility_ForceHierarchyBeyondDistance': u'', u'locationAllocation_MaxFeaturesInLineBarriers': u'', u'serviceArea_ForceHierarchyBeyondOther': u''}}, {u'allowedUploadFileTypes': u'', u'enabled': u'false', u'maxUploadFileSize': 0, u'capabilities': u'Uploads', u'typeName': u'MobileServer', u'properties': {}}, {u'allowedUploadFileTypes': u'', u'enabled': u'true', u'maxUploadFileSize': 0, u'capabilities': u'SingleImage,SeparateImages,Vectors', u'typeName': u'KmlServer', u'properties': {u'minRefreshPeriod': u'30', u'useDefaultSnippets': u'false', u'imageSize': u'1024', u'composite': u'true', u'endPointURL': u'', u'compatibilityMode': u'GoogleEarth', u'linkDescription': u'', u'featureLimit': u'1000000', u'useNetworkLinkControlTag': u'false', u'linkName': u'', u'message': u'', u'dpi': u'96'}}, {u'allowedUploadFileTypes': u'', u'enabled': u'false', u'maxUploadFileSize': 0, u'capabilities': u'', u'typeName': u'WFSServer', u'properties': {u'abstract': u'', u'axisOrderWFS10': u'LongLat', u'axisOrderWFS11': u'LatLong', u'providerName': u'', u'fees': u'', u'electronicMailAddress': u'', u'city': u'', u'accessConstraints': u'', u'title': u'', u'role': u'', u'postalCode': u'', u'serviceTypeVersion': u'', u'enableTransactions': u'', u'appSchemaPrefix': u'test', u'serviceType': u'', u'positionName': u'', u'pathToCustomGetCapabilitiesFiles': u'', u'customGetCapabilities': u'false', u'phone': u'', u'contactInstructions': u'', u'deliveryPoint': u'', u'hoursOfService': u'', u'individualName': u'', u'name': u'test', u'keyword': u'', u'country': u'', u'onlineResource': u'http://localhost:6080/arcgis/services/test/MapServer/WFSServer', u'administrativeArea': u'', u'facsimile': u'', u'providerSite': u'', u'appSchemaURI': u'http://localhost:6080/arcgis/services/test/MapServer/WFSServer'}}, {u'allowedUploadFileTypes': u'', u'enabled': u'false', u'maxUploadFileSize': 0, u'capabilities': u'Query', u'typeName': u'SchematicsServer', u'properties': {u'supportsREST': u'true'}}, {u'allowedUploadFileTypes': u'', u'enabled': u'false', u'maxUploadFileSize': 0, u'capabilities': u'Query,Create,Update,Delete,Uploads,Editing', u'typeName': u'FeatureServer', u'properties': {u'maxRecordCount': u'1000', u'versionedData': u'false', u'allowGeometryUpdates': u'true', u'realm': u'', u'allowOthersToUpdate': u'false', u'dataInGdb': u'true', u'datasetInspected': u'false', u'allowOthersToQuery': u'true', u'enableOwnershipBasedAccessControl': u'false', u'xssPreventionEnabled': u'true', u'allowTrueCurvesUpdates': u'false', u'zDefaultValue': u'0', u'editorTrackingRespectsDayLightSavingTime': u'false', u'allowOthersToDelete': u'false', u'enableZDefaults': u'false', u'creatorPresent': u'false', u'syncVersionCreationRule': u'versionPerDownloadedMap', u'editorTrackingTimeZoneID': u'UTC', u'syncEnabled': u'false', u'editorTrackingTimeInUTC': u'true'}}, {u'allowedUploadFileTypes': u'', u'enabled': u'false', u'maxUploadFileSize': 0, u'capabilities': u'', u'typeName': u'WCSServer', u'properties': {u'serviceHour': u'', u'abstract': u'', u'pathToCustomGetCapabilitiesFiles': u'', u'fees': u'', u'keywords': u'', u'city': u'', u'responsiblePosition': u'', u'accessConstraints': u'', u'responsiblePerson': u'', u'title': u'', u'zipcode': u'', u'role': u'', u'providerWebsite': u'', u'email': u'', u'province': u'', u'fax': u'', u'maxImageHeight': u'', u'customGetCapabilities': u'', u'phone': u'', u'contactInstructions': u'', u'address': u'', u'name': u'test', u'providerName': u'', u'country': u'', u'maxImageWidth': u'', u'onlineResource': u'http://localhost:6080/arcgis/services/test/MapServer/WCSServer'}}, {u'allowedUploadFileTypes': u'', u'enabled': u'false', u'maxUploadFileSize': 0, u'capabilities': u'GetCapabilities,GetMap,GetFeatureInfo,GetStyles,GetLegendGraphic,GetSchemaExtension', u'typeName': u'WMSServer', u'properties': {u'addressType': u'', u'abstract': u'', u'pathToCustomGetCapabilitiesFiles': u'', u'fees': u'', u'stateOrProvince': u'', u'contactVoiceTelephone': u'', u'city': u'', u'accessConstraints': u'', u'title': u'', u'contactFacsimileTelephone': u'', u'inheritLayerNames': u'false', u'contactElectronicMailAddress': u'', u'pathToCustomSLDFile': u'', u'contactPerson': u'', u'customGetCapabilities': u'false', u'address': u'', u'name': u'WMS', u'keyword': u'', u'country': u'', u'contactOrganization': u'', u'onlineResource': u'http://localhost:6080/arcgis/services/test/MapServer/WMSServer', u'postCode': u'', u'contactPosition': u''}}], u'maxWaitTime': 60, u'instancesPerContainer': 1, u'recycleInterval': 24}
services={"service":json.dumps(dataObj)}

adminself.updateServiceConfig('SampleWorldCities.MapServer',services)

